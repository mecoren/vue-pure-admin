var F=(g,v,a)=>new Promise((p,t)=>{var b=l=>{try{m(a.next(l))}catch(u){t(u)}},n=l=>{try{m(a.throw(l))}catch(u){t(u)}},m=l=>l.done?p(l.value):Promise.resolve(l.value).then(b,n);m((a=a.apply(g,v)).next())});import{f as P,g as q,b as A,c as M,_ as W}from"./_plugin-vue_export-helper-m4_qdDMH.js";/* empty css                   */import{u as G,P as H}from"./plus-form-DRHxYzB9.js";import{d as N,a as f,p as J,da as K,n as B,e as U,f as D,b as Q,aq as E,w as o,U as c,g as X,ar as T,b4 as V,i as y,h as S,t as I,u as d,a6 as z,l as $,bS as Y,cU as L,k as Z}from"./index-OobJTrE8.js";const ee={class:"plus-drawer-form__footer"};var le=N({name:"PlusDrawerForm",__name:"index",props:{modelValue:{default:()=>({})},visible:{type:Boolean,default:!1},drawer:{default:()=>({})},size:{default:"540px"},form:{default:()=>({})},hasFooter:{type:Boolean,default:!0},cancelText:{default:""},confirmText:{default:""},confirmLoading:{type:Boolean,default:!1},hasErrorTip:{type:Boolean,default:!0}},emits:["update:modelValue","update:visible","confirm","change","cancel","confirmError"],setup(g,{expose:v,emit:a}){const p=g,{t}=G(),b=f(),n=J(()=>{var e;return(e=b.value)==null?void 0:e.formInstance}),m=f(),l=f({}),u=f(!1),_=K(),x=P(_,q()),R=P(_,A()),O=P(_,M());B(()=>p.visible,e=>{u.value=e},{immediate:!0}),B(()=>p.modelValue,e=>{l.value=e},{immediate:!0});const j=(e,i)=>{a("update:modelValue",e),a("change",e,i)},C=()=>F(this,null,function*(){var e,i,h;try{(yield(e=n.value)==null?void 0:e.validate())&&a("confirm",l.value)}catch(r){if(p.hasErrorTip){L.closeAll();const s=Object.values(r);L.warning(((h=(i=s[0])==null?void 0:i[0])==null?void 0:h.message)||t("plus.form.errorTip"))}a("confirmError",r)}}),k=()=>{u.value=!1,a("update:visible",u.value),a("cancel")};return v({drawerInstance:m,formInstance:n}),(e,i)=>{const h=U("el-button");return D(),Q(d(Y),z({ref_key:"drawerInstance",ref:m,modelValue:u.value,"onUpdate:modelValue":i[1]||(i[1]=r=>u.value=r),class:"plus-drawer-form",size:e.size||"540px",title:d(t)("plus.drawerForm.title"),"close-on-click-modal":!1,"close-on-press-escape":!1},e.drawer,{onClose:k}),E({default:o(()=>[y(d(H),z({ref_key:"formInstance",ref:b,modelValue:l.value,"onUpdate:modelValue":i[0]||(i[0]=r=>l.value=r),"has-footer":!1},e.form,{onChange:j}),E({_:2},[e.$slots["form-footer"]?{name:"footer",fn:o(()=>[c(e.$slots,"form-footer")]),key:"0"}:void 0,e.$slots["form-group-header"]?{name:"group-header",fn:o(()=>[c(e.$slots,"form-group-header")]),key:"1"}:void 0,$(d(x),(r,s)=>({name:s,fn:o(w=>[c(e.$slots,s,T(V(w)))])})),$(d(R),(r,s)=>({name:s,fn:o(w=>[c(e.$slots,s,T(V(w)))])})),$(d(O),(r,s)=>({name:s,fn:o(w=>[c(e.$slots,s,T(V(w)))])})),e.$slots["tooltip-icon"]?{name:"tooltip-icon",fn:o(()=>[c(e.$slots,"tooltip-icon")]),key:"2"}:void 0]),1040,["modelValue"])]),_:2},[e.$slots["drawer-header"]?{name:"header",fn:o(()=>[c(e.$slots,"drawer-header")]),key:"0"}:void 0,e.hasFooter?{name:"footer",fn:o(()=>[X("div",ee,[c(e.$slots,"drawer-footer",T(V({handleConfirm:C,handleCancel:k})),()=>[y(h,{onClick:k},{default:o(()=>[S(I(e.cancelText||d(t)("plus.drawerForm.cancelText")),1)]),_:1}),y(h,{type:"primary",loading:e.confirmLoading,onClick:C},{default:o(()=>[S(I(e.confirmText||d(t)("plus.drawerForm.confirmText")),1)]),_:1},8,["loading"])])])]),key:"1"}:void 0]),1040,["modelValue","size","title"])}}}),ae=W(le,[["__file","index.vue"]]);const oe=ae,ie=N({__name:"drawer",setup(g){const v=[{label:"名称",width:120,prop:"name",valueType:"copy",tooltip:"名称最多显示6个字符"},{label:"状态",width:120,prop:"status",valueType:"select",options:[{label:"未解决",value:"0",color:"red"},{label:"已解决",value:"1",color:"blue"},{label:"解决中",value:"2",color:"yellow"},{label:"失败",value:"3",color:"red"}]},{label:"是否显示",width:100,prop:"switch",valueType:"switch"},{label:"时间",prop:"time",valueType:"date-picker"},{label:"数量",prop:"number",valueType:"input-number",fieldProps:{precision:2,step:2}},{label:"城市",prop:"city",valueType:"cascader",options:[{value:"0",label:"陕西",children:[{value:"0-0",label:"西安",children:[{value:"0-0-0",label:"新城区"},{value:"0-0-1",label:"高新区"},{value:"0-0-2",label:"灞桥区"}]}]},{value:"1",label:"山西",children:[{value:"1-0",label:"太原",children:[{value:"1-0-0",label:"小店区"},{value:"1-0-1",label:"古交市"},{value:"1-0-2",label:"万柏林区"}]}]}]},{label:"地区",prop:"place",tooltip:"请精确到门牌号",fieldProps:{placeholder:"请精确到门牌号"}},{label:"要求",prop:"demand",valueType:"checkbox",options:[{label:"四六级",value:"0"},{label:"计算机二级证书",value:"1"},{label:"普通话证书",value:"2"}]},{label:"梦想",prop:"gift",valueType:"radio",options:[{label:"诗",value:"0"},{label:"远方",value:"1"},{label:"美食",value:"2"}]},{label:"到期时间",prop:"endTime",valueType:"date-picker",fieldProps:{type:"datetimerange",startPlaceholder:"请选择开始时间",endPlaceholder:"请选择结束时间"}},{label:"说明",prop:"desc",valueType:"textarea",fieldProps:{maxlength:10,showWordLimit:!0,autosize:{minRows:2,maxRows:4}}}],a=f(!1),p=f({}),t=()=>{a.value=!0};return(b,n)=>{const m=U("el-button");return D(),Z("div",null,[y(m,{onClick:t},{default:o(()=>[S("打开抽屉表单")]),_:1}),y(d(oe),{visible:a.value,"onUpdate:visible":n[0]||(n[0]=l=>a.value=l),modelValue:p.value,"onUpdate:modelValue":n[1]||(n[1]=l=>p.value=l),form:{columns:v}},null,8,["visible","modelValue","form"])])}}});export{ie as _};
