var G=Object.defineProperty,H=Object.defineProperties;var J=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var L=(s,a,l)=>a in s?G(s,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):s[a]=l,T=(s,a)=>{for(var l in a||(a={}))K.call(a,l)&&L(s,l,a[l]);if(R)for(var l of R(a))M.call(a,l)&&L(s,l,a[l]);return s},E=(s,a)=>H(s,J(a));var x=(s,a,l)=>new Promise((p,d)=>{var h=r=>{try{t(l.next(r))}catch(m){d(m)}},n=r=>{try{t(l.throw(r))}catch(m){d(m)}},t=r=>r.done?p(r.value):Promise.resolve(r.value).then(h,n);t((l=l.apply(s,a)).next())});import{f as k,g as O,b as Q,c as W,_ as X}from"./_plugin-vue_export-helper-m4_qdDMH.js";import{u as ee,P as le}from"./plus-form-DRHxYzB9.js";import{d as j,a as S,da as ae,p as D,u as o,n as oe,f as i,b as f,aq as se,l as C,w as u,U as b,ar as N,b4 as U,bY as te,bq as B,fr as re,h as F,t as $,j as I,i as q,fs as ne,bZ as ue,ft as pe,fu as de,a6 as ce}from"./index-OobJTrE8.js";var ie=j({name:"PlusSearch",__name:"index",props:{modelValue:{default:()=>({})},defaultValues:{default:()=>({})},columns:{default:()=>[]},hasFooter:{type:Boolean,default:!0},hasReset:{type:Boolean,default:!0},hasUnfold:{type:Boolean,default:!0},searchText:{default:""},resetText:{default:""},searchLoading:{type:Boolean,default:!1},inline:{type:Boolean,default:!0},showNumber:{default:2},rowProps:{default:()=>({gutter:20})},colProps:{default:()=>({xs:24,sm:12,md:8,lg:8,xl:6})}},emits:["update:modelValue","search","change","reset","collapse"],setup(s,{expose:a,emit:l}){const p=s,{t:d}=ee(),h=S(),n=S(!1),t=S({}),r=ae(),m=k(r,O()),z=k(r,Q()),Y=k(r,W()),w=D(()=>p.columns.filter(e=>o(e.hideInSearch)!==!0).map(e=>E(T({},e),{hideInForm:!1}))),Z=D(()=>p.hasUnfold&&!n.value?w.value.slice(0,p.showNumber):w.value);oe(()=>p.modelValue,e=>{t.value=e},{immediate:!0});const A=(e,g)=>x(this,null,function*(){l("update:modelValue",e),l("change",e,g)}),_=()=>{l("search",t.value)},P=()=>{t.value=T({},p.defaultValues),l("update:modelValue",t.value),l("reset",t.value)},V=()=>{n.value=!n.value,l("collapse",n.value)};return a({plusFormInstance:h,handleReset:P,handleSearch:_,handleUnfold:V}),(e,g)=>(i(),f(o(le),ce({ref_key:"plusFormInstance",ref:h},e.$attrs,{modelValue:t.value,"onUpdate:modelValue":g[0]||(g[0]=y=>t.value=y),inline:e.inline,"row-props":e.rowProps,"col-props":e.colProps,columns:Z.value,class:"plus-search","has-footer":!1,onChange:A}),se({"search-footer":u(()=>[e.hasFooter?(i(),f(o(te),{key:0,class:"plus-search__button__wrapper"},{default:u(()=>[b(e.$slots,"footer",{isShowUnfold:n.value,handleReset:P,handleSearch:_,handleUnfold:V},()=>[e.hasReset?(i(),f(o(B),{key:0,icon:o(re),onClick:P},{default:u(()=>[F($(e.resetText||o(d)("plus.search.resetText")),1)]),_:1},8,["icon"])):I("v-if",!0),q(o(B),{type:"primary",loading:e.searchLoading,icon:o(ne),onClick:_},{default:u(()=>[F($(e.searchText||o(d)("plus.search.searchText")),1)]),_:1},8,["loading","icon"]),e.hasUnfold&&w.value.length>e.showNumber?(i(),f(o(B),{key:1,type:"primary",link:"",onClick:V},{default:u(()=>[F($(n.value?o(d)("plus.search.retract"):o(d)("plus.search.expand"))+" ",1),q(o(ue),null,{default:u(()=>[n.value?(i(),f(o(pe),{key:0})):(i(),f(o(de),{key:1}))]),_:1})]),_:1})):I("v-if",!0)])]),_:3})):I("v-if",!0)]),_:2},[C(o(m),(y,c)=>({name:c,fn:u(v=>[b(e.$slots,c,N(U(v)))])})),C(o(z),(y,c)=>({name:c,fn:u(v=>[b(e.$slots,c,N(U(v)))])})),C(o(Y),(y,c)=>({name:c,fn:u(v=>[b(e.$slots,c,N(U(v)))])})),e.$slots["tooltip-icon"]?{name:"tooltip-icon",fn:u(()=>[b(e.$slots,"tooltip-icon")]),key:"0"}:void 0]),1040,["modelValue","inline","row-props","col-props","columns"]))}}),fe=X(ie,[["__file","index.vue"]]);const he=fe,ye=j({__name:"search",setup(s){const a=S({status:"0",time:new Date().toString()}),l=[{label:"名称",prop:"name",valueType:"copy",tooltip:"名称最多显示6个字符"},{label:"状态",prop:"status",valueType:"select",options:[{label:"未解决",value:"0",color:"red"},{label:"已解决",value:"1",color:"blue"},{label:"解决中",value:"2",color:"yellow"},{label:"失败",value:"3",color:"red"}]},{label:"时间",prop:"time",valueType:"date-picker"},{label:"数量",prop:"number",valueType:"input-number",fieldProps:{precision:2,step:2}},{label:"城市",prop:"city",valueType:"cascader",options:[{value:"0",label:"陕西",children:[{value:"0-0",label:"西安",children:[{value:"0-0-0",label:"新城区"},{value:"0-0-1",label:"高新区"},{value:"0-0-2",label:"灞桥区"}]}]},{value:"1",label:"山西",children:[{value:"1-0",label:"太原",children:[{value:"1-0-0",label:"小店区"},{value:"1-0-1",label:"古交市"},{value:"1-0-2",label:"万柏林区"}]}]}]},{label:"地区",prop:"place",tooltip:"请精确到门牌号",fieldProps:{placeholder:"请精确到门牌号"}},{label:"到期时间",prop:"endTime",valueType:"date-picker",fieldProps:{type:"datetimerange",startPlaceholder:"请选择",endPlaceholder:"请选择"}},{label:"奖励",prop:"price"},{label:"提成",prop:"percentage"}],p=n=>{},d=n=>{},h=()=>{};return(n,t)=>(i(),f(o(he),{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=r=>a.value=r),columns:l,"show-number":2,"label-width":"80","label-position":"right",onChange:p,onSearch:d,onReset:h},null,8,["modelValue"]))}});export{ye as _};
